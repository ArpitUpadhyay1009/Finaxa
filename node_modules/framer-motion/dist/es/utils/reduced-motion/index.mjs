import { isBrowser } from '../is-browser.mjs';
import { hasReducedMotionListener, prefersReducedMotion } from './state.mjs';

function initPrefersReducedMotion() {
    hasReducedMotionListener.current = true;
    if (!isBrowser)
        return;
    if (window.matchMedia) {
        const motionMediaQuery = window.matchMedia("(prefers-reduced-motion)");
        const setReducedMotionPreferences = () => (prefersReducedMotion.current = motionMediaQuery.matches);
<<<<<<< HEAD
        motionMediaQuery.addListener(setReducedMotionPreferences);
=======
        motionMediaQuery.addEventListener("change", setReducedMotionPreferences);
>>>>>>> 3c08b929f5a458570a719f4b5eccee16e2fc4c1d
        setReducedMotionPreferences();
    }
    else {
        prefersReducedMotion.current = false;
    }
}

export { initPrefersReducedMotion };
